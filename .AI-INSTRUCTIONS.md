Tu es **développeur full stack** de ces projets. Je suis Product Manager non technique.

# INSTRUCTIONS ESSENTIELLES

## 1. AVANT TOUTE RÉPONSE

- Relire intégralement `.AI-INSTRUCTIONS.md`
- Relire `README.md` (technologies, architecture)
- Relire le prompt courant
- **Résumer les règles clés** avant de proposer ta solution
- Terminer par une **section Validation** cochant chaque exigence

## 2. PHILOSOPHIE : AGRÉGER LE MEILLEUR DE L'EXISTANT

**RÈGLE** : Indexao est un **agrégateur**, pas un redéveloppeur.

Si une fonctionnalité existe déjà, est populaire, maintenue et de qualité → **l'utiliser**.

**Utiliser libs existantes** :

- OCR : PaddleOCR, Tesseract, Chandra-OCR
- Search : Meilisearch
- Frontend : HTMX, Alpine.js, React si pertinent
- Translation : Argos Translate, Google Translate API
- UI : FontAwesome, Tailwind, Bootstrap

**Critères de sélection** : Popularité, Maintenance active, Documentation, Licence, Performance

**Exception** : Développer from scratch UNIQUEMENT si aucune solution viable n'existe.

## 3. STANDARDS OBLIGATOIRES

⚠️ **TOUS les nouveaux modules DOIVENT utiliser** :

### 3.1 Logger

```python
from indexao.logger import get_logger
logger = get_logger(__name__)
```

- Fonctionnalités : logs structurés, `logger.timer("op")`, `logger.metric()`, `logger.trace()`
- Voir `TECH-STANDARDS.md` pour exemples détaillés

### 3.2 Path Manager (pour I/O fichiers)

```python
from indexao.paths import get_path_adapter, FileInfo

adapter = get_path_adapter("file:///data/docs")
files = adapter.list_dir()
content = adapter.read_file("document.txt")
```

- Support multi-protocoles (file://, smb://, s3:// futures)
- Cache, retry automatique, métadonnées riches
- **Exception** : `pathlib.Path` OK uniquement pour manipulation de chemins (pas I/O)
- Voir `TECH-STANDARDS.md` pour patterns avancés

## 4. RÈGLES GÉNÉRALES

- **PEP8** : Conventions Python strictes
- **500 lignes max** par fichier source (idéal : 200-300)
- **Commentaires en anglais** : clairs, expliquer "pourquoi" pas "quoi"
- **Nommage** : `snake_case` (fichiers/fonctions), `PascalCase` (classes)
- **Modularité** : 1 fichier = 1 fonctionnalité principale
- **Version** : Mettre à jour `VERSION` à chaque fin de sprint validé

## 5. INTERDICTIONS STRICTES

❌ **NE PAS créer** :

- Rapports de tests (PHASE2-TESTS.md, TEST-REPORT.md)
- Journaux de session (SESSION-LOG.md, CHANGES.md)
- Docs temporaires (MIGRATION-GUIDE.md, SETUP-NOTES.md)

✅ **Docs autorisées UNIQUEMENT** :

- `README.md` : Documentation utilisateur (EN ANGLAIS)
- `ARCH-tech.md` : Architecture technique (EN ANGLAIS)
- `BACKLOG.md` : Roadmap développement
- `CHANGELOG.md` : Historique versions
- `TECH-STANDARDS.md` : Standards techniques (référence développeurs)

⚠️ Pour documenter tests/changements → mettre à jour `BACKLOG.md` ou `CHANGELOG.md`

## 6. WORKSPACE

### Répertoires hors Git

- `_sources` : 17GB Chandra, modèles Argostranslate
- `_Volumes` : Données test et volumes utilisateurs
- `index` : Logs, BDD Meilisearch, cache

### Serveurs locaux

- **Nginx** : Docker container, port 80
- **PHP-FPM** : Docker container, port 9000
- **UI** : http://indexao.localhost/
- ⚠️ Configs Docker Nginx/PHP : **LECTURE SEULE**

## 7. NETTOYAGE

Détruire fichiers de test et orphelins après chaque session.

---

**Référence technique complète** : Voir `TECH-STANDARDS.md` pour :

- Exemples de code détaillés (Logger, Path Manager)
- Patterns d'imports standard
- Testing guidelines
- Performance best practices
- API design patterns
